<div class="panel-group" id="accordion">
  <% computed_solutions.each do |computed_solution| %>
    <div class="panel panel-default">
      <a data-toggle="collapse" data-parent="#accordion" href="#<%=computed_solution.id%>">
        <div class="panel-heading sol-head">
          <div class="panel-title" id="sol-list">

            <div class="sol-status label label-<%= computed_solution.ready? ? "success" : computed_solution.error? ? "danger" : "info" %>">
              <%= t("computed_solutionution.status.#{computed_solution.status}")%>
              <span class="badge nb_solutions">
                <%= computed_solution.nb_optimal_solutions %>
              </span> <br>
              <small><%= l computed_solution.created_at, format: :default_heure %></small>
            </div>
            <div class="compute-props">
              <div class="infos">
                <blockquote>
                  <p>Planning</p>
                  <footer>
                  <%= computed_solution.p_nb_slots %> créneaux (<%= computed_solution.p_nb_hours %>heures)
                  <ul>
                  <% computed_solution.p_nb_hours_roles.each do |role, hours|%>
                    <li><span class="role-name" style="background-color: <%= role_color(role) %>; <%= role_text_color(role) %>"> <%= role.to_s %></span> : <%= hours %>h</li>
                  <% end %>
                  </ul>
                  </footer>
                </blockquote>
              </div>
              <div class="infos">
                <blockquote>
                  <p>Users</p>
                  <footer>
                    <%= computed_solution.team.values.flatten.uniq.count %> équipiers :
                    <ul>
                      <% computed_solution.team.each do |role, team| %>
                      <li> <span class="role-name" style="background-color: <%= role_color(role) %>; <%= role_text_color(role) %>"> <%= role.to_s %></span> :
                        <%= team.join(", ") %>
                      </li>
                      <% end %>
                    </ul>
                  </footer>
                </blockquote>
              </div>
              <div class="infos">
                <blockquote>
                  <p>Solutions</p>
                  <footer>
                    <%= computed_solution.nb_optimal_solutions %> bonnes solutions
                    <ul>
                      <li>combinaisons : <%= computed_solution.nb_possibilities_theory %></li>
                      <li>itérations : <%= computed_solution.nb_iterations %></li>
                      <li>solutions proches : <%= computed_solution.nb_solutions %></li>
                    </ul>
                  </footer>
                </blockquote>
              </div>
            </div>
            <% if computed_solution.pending? %>
              <div><i class="fa fa-spinner fa-pulse"></i></div>
            <% end %>
          </div>
        </div>
      </a>

      <div id="<%= computed_solution.id %>" class="panel-collapse collapse">
        <div class="panel-body">
          <div class="list-group">
            <% computed_solution.solutions.each_with_index do |solution, index| %>
              <div class="list-group-item sol-item">
                <div class="sol-title">Solution n°<%= index + 1 %></div>
                <div class="sol-details">
                  extra hours : <span class="badge"> <%= solution.nb_extra_hours %></span> overlaps = <span class="badge" ><%= solution.relevance %></span>/ effectivity : <span class="badge" ><%= solution.effectivity %></span> / relevance <span class="badge" ><%= solution.relevance %></span>
                </div>
                <div class="action-group">
                  <button class="sol-btn"><i class="fa fa-eye"></i></button>
                  <button class="sol-btn"><i class="fa fa-check-circle"></i></button>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
